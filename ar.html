<!doctype html>
<html lang="ru">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>AR — Snowman</title>

<!-- model-viewer -->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
<style>
  html,body{margin:0;height:100%;background:#000}
  model-viewer{position:fixed;inset:0;width:100%;height:100%}
  /* кнопка AR в фирменном стиле */
  .ar-btn{
    position:fixed;left:50%;bottom:20px;transform:translateX(-50%);
    padding:.9rem 1.2rem;border-radius:.8rem;border:1px solid rgba(255,255,255,.3);
    background:rgba(255,255,255,.15);backdrop-filter:blur(10px);
    color:#fff;font:600 16px system-ui;box-shadow:0 6px 18px rgba(0,0,0,.35);
  }
</style>

<model-viewer id="mv"
  src="assets/snowman.glb"
  ios-src="assets/snowman.usdz"         <!-- добавь этот файл для AR на iPhone -->
  ar ar-modes="scene-viewer quick-look webxr"
  camera-controls shadow-intensity="1">
  <button slot="ar-button" class="ar-btn">Открыть в AR</button>
</model-viewer>

<script>
  // Если пришли как .../ar.html?autoplay=1 — сразу пробуем открыть AR
  const mv = document.getElementById('mv');
  const url = new URL(location.href);
  if (url.searchParams.get('autoplay') === '1') {
    mv.addEventListener('load', () => {
      // activateAR сработает: на Android — Scene Viewer, на iOS — Quick Look (если есть ios-src)
      mv.activateAR();
    });
  }
</script>
</html>
